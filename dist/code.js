const width=464;let height=Math.floor(.2*figma.viewport.bounds.height);height<316&&(height=316),figma.clientStorage.getAsync("code").then(e=>{e&&"string"==typeof e?figma.showUI(__html__.replace("$saved_code",e),{width:width,height:height}):figma.showUI(__html__.replace("$saved_code",""),{width:width,height:height})}).catch(e=>{figma.showUI(__html__.replace("$saved_code",""),{width:width,height:height})});const runCode=code=>eval(code);figma.ui.onmessage=(e=>{if("run-code"===e.type){const t=e.code,i=runCode(t);i&&figma.notify(i.toString()),figma.closePlugin()}else if("code-input"===e.type){const t=e.code;figma.clientStorage.setAsync("code",t).catch(e=>{console.log(e)})}else figma.closePlugin()});